"use strict";class SSProduct{SITE_CODE="vn";API_VERSION="v2";API_STYLE="global";API_SHOP_ENDPOINT="https://shop.samsung.com/";API_SEARCH_ENDPOINT="https://searchapi.samsung.com/";constructor(t={}){try{if("undefined"==typeof jQuery)throw new Error("jQuery is not defined. Please include jQuery before using SSProduct.");const{siteCode:r,apiVersion:e,apiStyle:s}=t;r&&this.setSiteCode(r),e&&this.setApiVersion(e),s&&this.setApiStyle(s)}catch(t){}}setSiteCode(t){if("string"==typeof t&&t.length>0)return this.SITE_CODE=t,this;throw new Error("Invalid site code. It should be a non-empty string.")}setApiStyle(t){if("string"==typeof t&&t.length>0)return this.API_STYLE=t,this;throw new Error("Invalid API style. It should be a non-empty string.")}setApiVersion(t){if("string"==typeof t&&t.length>0)return this.API_VERSION=t,this;throw new Error("Invalid API version. It should be a non-empty string.")}_addToCartV2(t){let r={products:t},e=new URL(`${this.API_SHOP_ENDPOINT}${this.SITE_CODE}/servicesv2/addToCart`);return $.ajax({url:e.toString(),method:"POST",headers:{"content-type":"application/json"},data:JSON.stringify(r),xhrFields:{withCredentials:!0}})}_addToCartV1(t){let r=new URL(`${this.API_SHOP_ENDPOINT}${this.SITE_CODE}/ng/p4v1/addToCart`);return t.map(((t,e)=>{r.searchParams.append(`products[${e}].productCode`,t.productCode.toString().toUpperCase()),r.searchParams.append(`products[${e}].quantity`,parseInt(t.quantity)||1)})),$.ajax({url:r.toString(),method:"GET",xhrFields:{withCredentials:!0}})}addToCart(t,r="v1"){return new Promise((async(e,s)=>{try{let s=this;if(!Array.isArray(t)||0===t.length)throw new Error("Invalid input: skus should be a non-empty array.");e("v1"==r?await s._addToCartV1(t):await s._addToCartV2(t))}catch(t){s(t)}}))}getSimpleProductInfo(t){let r=this;return new Promise((async(e,s)=>{try{if(!Array.isArray(t)||0===t.length)throw new Error("Invalid input: SKU should be a non-empty array.");let s=new URL(`${r.API_SHOP_ENDPOINT}${r.SITE_CODE}/servicesv2/getSimpleProductsInfo`);t=t.join(","),s.searchParams.append("productCodes",t);const a=await $.get(s.toString());if(!a?.productDatas)throw new Error("Invalid response from server.");if(Array.isArray(a.productDatas)&&a.productDatas.length<=0)throw new Error("No product data found in the response.");e(a.productDatas)}catch(t){s(t)}}))}getProductInfoBySkus(t){let r=this;return new Promise((async(e,s)=>{try{if(!Array.isArray(t)||0===t.length)throw new Error("Invalid input: SKU should be a non-empty array.");let s=new URL(`${r.API_SEARCH_ENDPOINT}v6/front/b2c/product/card/detail/${r.API_STYLE}`);s.searchParams.append("siteCode",r.SITE_CODE),s.searchParams.append("commonCodeYN","N"),s.searchParams.append("saleSkuYN","N"),s.searchParams.append("onlyRequestSkuYN","N"),s.searchParams.append("keySummaryYN","N"),t=t.join(","),s.searchParams.append("modelList",t);const a=await $.get(s.toString());if(!a?.response?.resultData?.productList)throw new Error("Invalid response from server.");if(a.response.resultData.productList.length<=0)throw new Error("No product data found in the response.");e(a.response.resultData.productList)}catch(t){s(t)}}))}getProductStockStatus(t){let r=this;return new Promise((async(e,s)=>{try{if(!Array.isArray(t)||0===t.length)throw new Error("Invalid input: SKU should be a non-empty array.");const s=await r.getSimpleProductInfo(t);let a=[];s.map((t=>{a.push({resultMessage:t.resultMessage,sku:t.productCode,stockLevelStatus:t.stockLevelStatus,stockLevelStatusDisplay:t.stockLevelStatusDisplay,inStock:!("null"==typeof t.stockLevelStatus||"inStock"!=t.stockLevelStatus)})})),e(a)}catch(t){s(t)}}))}isInstock(t){let r=this;return new Promise((async(e,s)=>{try{if("string"!=typeof t||0===t.length)throw new Error("Invalid input: SKU should be a non-empty string.");const s=await r.getProductStockStatus([t]);if(0===s.length)throw new Error("No stock information found for the given SKU.");e(s[0].inStock)}catch(t){s(t)}}))}}